import{s as De,n as ue,c as _e,o as we,r as Se}from"../chunks/scheduler.b5ecf4e6.js";import{S as Ae,i as Ie,s as A,g as h,e as pe,F as Ne,f as d,c as I,h as _,j as C,x as G,k as i,a as R,y as a,A as se,m as L,n as M,l as $,o as x,G as Ve}from"../chunks/index.7d6cf7e9.js";import{g as Pe,e as be}from"../chunks/each.0775bae0.js";import{u as Le}from"../chunks/usePollingServices.2f315274.js";import{a as Me}from"../chunks/auth.34428d7b.js";const{document:ke}=Pe;function me(l,e,t){const s=l.slice();return s[22]=e[t],s}function Te(l){let e,t,s=l[0]&&qe(l),v=be(l[5]),r=[];for(let n=0;n<v.length;n+=1)r[n]=ye(me(l,v,n));return{c(){s&&s.c(),e=A(),t=h("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){s&&s.l(n),e=I(n),t=_(n,"DIV",{class:!0});var c=C(t);for(let o=0;o<r.length;o+=1)r[o].l(c);c.forEach(d),this.h()},h(){i(t,"class","services-grid svelte-1qvq1kb")},m(n,c){s&&s.m(n,c),R(n,e,c),R(n,t,c);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(n,c){if(n[0]?s?s.p(n,c):(s=qe(n),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c&31776){v=be(n[5]);let o;for(o=0;o<v.length;o+=1){const E=me(n,v,o);r[o]?r[o].p(E,c):(r[o]=ye(E),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=v.length}},d(n){n&&(d(e),d(t)),s&&s.d(n),Ve(r,n)}}}function Oe(l){let e,t,s="ðŸ“Š",v,r,n="No services found",c,o,E;function w(f,p){return f[6]?Re:je}let u=w(l),k=u(l),m=l[6]&&ge();return{c(){e=h("div"),t=h("div"),t.textContent=s,v=A(),r=h("h3"),r.textContent=n,c=A(),o=h("p"),k.c(),E=A(),m&&m.c(),this.h()},l(f){e=_(f,"DIV",{class:!0});var p=C(e);t=_(p,"DIV",{class:!0,"aria-hidden":!0,"data-svelte-h":!0}),G(t)!=="svelte-s0v87j"&&(t.textContent=s),v=I(p),r=_(p,"H3",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-1dj9e3v"&&(r.textContent=n),c=I(p),o=_(p,"P",{class:!0});var g=C(o);k.l(g),g.forEach(d),E=I(p),m&&m.l(p),p.forEach(d),this.h()},h(){i(t,"class","empty-state__icon svelte-1qvq1kb"),i(t,"aria-hidden","true"),i(r,"class","empty-state__title svelte-1qvq1kb"),i(o,"class","empty-state__description svelte-1qvq1kb"),i(e,"class","empty-state svelte-1qvq1kb")},m(f,p){R(f,e,p),a(e,t),a(e,v),a(e,r),a(e,c),a(e,o),k.m(o,null),a(e,E),m&&m.m(e,null)},p(f,p){u!==(u=w(f))&&(k.d(1),k=u(f),k&&(k.c(),k.m(o,null))),f[6]?m||(m=ge(),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(f){f&&d(e),k.d(),m&&m.d()}}}function Ue(l){let e,t,s,v="Failed to load monitoring data",r,n,c,o;return{c(){e=h("div"),t=h("div"),s=h("h3"),s.textContent=v,r=A(),n=h("p"),c=L("Error: "),o=L(l[3]),this.h()},l(E){e=_(E,"DIV",{class:!0});var w=C(e);t=_(w,"DIV",{class:!0});var u=C(t);s=_(u,"H3",{"data-svelte-h":!0}),G(s)!=="svelte-kkj1sw"&&(s.textContent=v),r=I(u),n=_(u,"P",{});var k=C(n);c=M(k,"Error: "),o=M(k,l[3]),k.forEach(d),u.forEach(d),w.forEach(d),this.h()},h(){i(t,"class","error-content"),i(e,"class","error")},m(E,w){R(E,e,w),a(e,t),a(t,s),a(t,r),a(t,n),a(n,c),a(n,o)},p(E,w){w&8&&x(o,E[3])},d(E){E&&d(e)}}}function He(l){let e,t=`<div class="loading-spinner svelte-1qvq1kb" aria-hidden="true"></div>
      Loading services...`;return{c(){e=h("div"),e.innerHTML=t,this.h()},l(s){e=_(s,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-6r7gsq"&&(e.innerHTML=t),this.h()},h(){i(e,"class","loading svelte-1qvq1kb")},m(s,v){R(s,e,v)},p:ue,d(s){s&&d(e)}}}function qe(l){let e,t,s,v,r,n,c=l[0].labels.up+"",o,E,w,u,k,m,f,p,g=l[0].labels.slow+"",D,q,S,V,T,z,B,W,b=l[0].labels.down+"",y,P,X,F,J,te,j,Q="Not checked";return{c(){e=h("div"),t=h("div"),s=h("div"),v=A(),r=h("span"),n=L("Up ("),o=L(c),E=L(")"),w=A(),u=h("div"),k=h("div"),m=A(),f=h("span"),p=L("Slow ("),D=L(g),q=L(")"),S=A(),V=h("div"),T=h("div"),z=A(),B=h("span"),W=L("Down ("),y=L(b),P=L(")"),X=A(),F=h("div"),J=h("div"),te=A(),j=h("span"),j.textContent=Q,this.h()},l(Y){e=_(Y,"DIV",{class:!0});var O=C(e);t=_(O,"DIV",{class:!0});var K=C(t);s=_(K,"DIV",{class:!0,style:!0}),C(s).forEach(d),v=I(K),r=_(K,"SPAN",{});var Z=C(r);n=M(Z,"Up ("),o=M(Z,c),E=M(Z,")"),Z.forEach(d),K.forEach(d),w=I(O),u=_(O,"DIV",{class:!0});var ee=C(u);k=_(ee,"DIV",{class:!0,style:!0}),C(k).forEach(d),m=I(ee),f=_(ee,"SPAN",{});var N=C(f);p=M(N,"Slow ("),D=M(N,g),q=M(N,")"),N.forEach(d),ee.forEach(d),S=I(O),V=_(O,"DIV",{class:!0});var U=C(V);T=_(U,"DIV",{class:!0,style:!0}),C(T).forEach(d),z=I(U),B=_(U,"SPAN",{});var H=C(B);W=M(H,"Down ("),y=M(H,b),P=M(H,")"),H.forEach(d),U.forEach(d),X=I(O),F=_(O,"DIV",{class:!0});var le=C(F);J=_(le,"DIV",{class:!0,style:!0}),C(J).forEach(d),te=I(le),j=_(le,"SPAN",{"data-svelte-h":!0}),G(j)!=="svelte-u8rtka"&&(j.textContent=Q),le.forEach(d),O.forEach(d),this.h()},h(){i(s,"class","legend-color svelte-1qvq1kb"),$(s,"background-color",l[9].UP),i(t,"class","legend-item svelte-1qvq1kb"),i(k,"class","legend-color svelte-1qvq1kb"),$(k,"background-color",l[9].SLOW),i(u,"class","legend-item svelte-1qvq1kb"),i(T,"class","legend-color svelte-1qvq1kb"),$(T,"background-color",l[9].DOWN),i(V,"class","legend-item svelte-1qvq1kb"),i(J,"class","legend-color svelte-1qvq1kb"),$(J,"background-color",l[9].null),i(F,"class","legend-item svelte-1qvq1kb"),i(e,"class","legend svelte-1qvq1kb")},m(Y,O){R(Y,e,O),a(e,t),a(t,s),a(t,v),a(t,r),a(r,n),a(r,o),a(r,E),a(e,w),a(e,u),a(u,k),a(u,m),a(u,f),a(f,p),a(f,D),a(f,q),a(e,S),a(e,V),a(V,T),a(V,z),a(V,B),a(B,W),a(B,y),a(B,P),a(e,X),a(e,F),a(F,J),a(F,te),a(F,j)},p(Y,O){O&1&&c!==(c=Y[0].labels.up+"")&&x(o,c),O&1&&g!==(g=Y[0].labels.slow+"")&&x(D,g),O&1&&b!==(b=Y[0].labels.down+"")&&x(y,b)},d(Y){Y&&d(e)}}}function ye(l){let e,t,s=Ee(l[22].name)+"",v,r,n,c,o,E;function w(...f){return l[16](l[22],...f)}function u(...f){return l[17](l[22],...f)}function k(...f){return l[18](l[22],...f)}function m(...f){return l[19](l[22],...f)}return{c(){e=h("div"),t=h("div"),v=L(s),n=A(),this.h()},l(f){e=_(f,"DIV",{class:!0,style:!0,tabindex:!0,role:!0,"aria-label":!0});var p=C(e);t=_(p,"DIV",{class:!0,title:!0});var g=C(t);v=M(g,s),g.forEach(d),n=I(p),p.forEach(d),this.h()},h(){i(t,"class","service-name svelte-1qvq1kb"),i(t,"title",r=l[22].name),i(e,"class","service-tile svelte-1qvq1kb"),$(e,"background-color",l[10](l[22].lastStatus)),i(e,"tabindex","0"),i(e,"role","button"),i(e,"aria-label",c="Service "+l[22].name+": "+ce(l[22].lastStatus)+", "+ie(l[22].lastCheckedAt))},m(f,p){R(f,e,p),a(e,t),a(t,v),a(e,n),o||(E=[se(e,"mouseenter",w),se(e,"mouseleave",l[12]),se(e,"click",u),se(e,"touchstart",k),se(e,"keydown",m)],o=!0)},p(f,p){l=f,p&32&&s!==(s=Ee(l[22].name)+"")&&x(v,s),p&32&&r!==(r=l[22].name)&&i(t,"title",r),p&32&&$(e,"background-color",l[10](l[22].lastStatus)),p&32&&c!==(c="Service "+l[22].name+": "+ce(l[22].lastStatus)+", "+ie(l[22].lastCheckedAt))&&i(e,"aria-label",c)},d(f){f&&d(e),o=!1,Se(E)}}}function je(l){let e;return{c(){e=L("Login to start monitoring services")},l(t){e=M(t,"Login to start monitoring services")},m(t,s){R(t,e,s)},d(t){t&&d(e)}}}function Re(l){let e;return{c(){e=L("Add your first service to start monitoring")},l(t){e=M(t,"Add your first service to start monitoring")},m(t,s){R(t,e,s)},d(t){t&&d(e)}}}function ge(l){let e,t="Add Service";return{c(){e=h("a"),e.textContent=t,this.h()},l(s){e=_(s,"A",{href:!0,class:!0,"data-svelte-h":!0}),G(e)!=="svelte-p4tpjs"&&(e.textContent=t),this.h()},h(){i(e,"href","/services"),i(e,"class","empty-state__action btn btn-primary svelte-1qvq1kb")},m(s,v){R(s,e,v)},d(s){s&&d(e)}}}function Ce(l){let e,t,s,v=l[1].name+"",r,n,c,o,E="URL:",w,u,k=l[1].url+"",m,f,p,g,D="Status:",q,S,V=ce(l[1].lastStatus)+"",T,z,B,W,b,y="Latency:",P,X,F=l[1].lastLatencyMs!==null?`${l[1].lastLatencyMs}ms`:"N/A",J,te,j,Q,Y="Last checked:",O,K,Z=ie(l[1].lastCheckedAt)+"",ee;return{c(){e=h("div"),t=h("div"),s=h("h3"),r=L(v),n=A(),c=h("div"),o=h("span"),o.textContent=E,w=A(),u=h("span"),m=L(k),f=A(),p=h("div"),g=h("span"),g.textContent=D,q=A(),S=h("span"),T=L(V),B=A(),W=h("div"),b=h("span"),b.textContent=y,P=A(),X=h("span"),J=L(F),te=A(),j=h("div"),Q=h("span"),Q.textContent=Y,O=A(),K=h("span"),ee=L(Z),this.h()},l(N){e=_(N,"DIV",{class:!0,style:!0,role:!0,"aria-labelledby":!0});var U=C(e);t=_(U,"DIV",{class:!0});var H=C(t);s=_(H,"H3",{id:!0,class:!0});var le=C(s);r=M(le,v),le.forEach(d),n=I(H),c=_(H,"DIV",{class:!0});var ae=C(c);o=_(ae,"SPAN",{class:!0,"data-svelte-h":!0}),G(o)!=="svelte-1qbddqn"&&(o.textContent=E),w=I(ae),u=_(ae,"SPAN",{class:!0});var ve=C(u);m=M(ve,k),ve.forEach(d),ae.forEach(d),f=I(H),p=_(H,"DIV",{class:!0});var ne=C(p);g=_(ne,"SPAN",{class:!0,"data-svelte-h":!0}),G(g)!=="svelte-1es190i"&&(g.textContent=D),q=I(ne),S=_(ne,"SPAN",{class:!0});var de=C(S);T=M(de,V),de.forEach(d),ne.forEach(d),B=I(H),W=_(H,"DIV",{class:!0});var re=C(W);b=_(re,"SPAN",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-1sgh8ma"&&(b.textContent=y),P=I(re),X=_(re,"SPAN",{class:!0});var fe=C(X);J=M(fe,F),fe.forEach(d),re.forEach(d),te=I(H),j=_(H,"DIV",{class:!0});var oe=C(j);Q=_(oe,"SPAN",{class:!0,"data-svelte-h":!0}),G(Q)!=="svelte-rrvfh5"&&(Q.textContent=Y),O=I(oe),K=_(oe,"SPAN",{class:!0});var he=C(K);ee=M(he,Z),he.forEach(d),oe.forEach(d),H.forEach(d),U.forEach(d),this.h()},h(){var N;i(s,"id","overlay-title"),i(s,"class","svelte-1qvq1kb"),i(o,"class","overlay-label svelte-1qvq1kb"),i(u,"class","overlay-value svelte-1qvq1kb"),i(c,"class","overlay-field svelte-1qvq1kb"),i(g,"class","overlay-label svelte-1qvq1kb"),i(S,"class",z="overlay-value status-"+(((N=l[1].lastStatus)==null?void 0:N.toLowerCase())||"unknown")+" svelte-1qvq1kb"),i(p,"class","overlay-field svelte-1qvq1kb"),i(b,"class","overlay-label svelte-1qvq1kb"),i(X,"class","overlay-value svelte-1qvq1kb"),i(W,"class","overlay-field svelte-1qvq1kb"),i(Q,"class","overlay-label svelte-1qvq1kb"),i(K,"class","overlay-value svelte-1qvq1kb"),i(j,"class","overlay-field svelte-1qvq1kb"),i(t,"class","overlay-content svelte-1qvq1kb"),i(e,"class","service-overlay svelte-1qvq1kb"),$(e,"left",l[2].x+"px"),$(e,"top",l[2].y+"px"),i(e,"role","tooltip"),i(e,"aria-labelledby","overlay-title")},m(N,U){R(N,e,U),a(e,t),a(t,s),a(s,r),a(t,n),a(t,c),a(c,o),a(c,w),a(c,u),a(u,m),a(t,f),a(t,p),a(p,g),a(p,q),a(p,S),a(S,T),a(t,B),a(t,W),a(W,b),a(W,P),a(W,X),a(X,J),a(t,te),a(t,j),a(j,Q),a(j,O),a(j,K),a(K,ee)},p(N,U){var H;U&2&&v!==(v=N[1].name+"")&&x(r,v),U&2&&k!==(k=N[1].url+"")&&x(m,k),U&2&&V!==(V=ce(N[1].lastStatus)+"")&&x(T,V),U&2&&z!==(z="overlay-value status-"+(((H=N[1].lastStatus)==null?void 0:H.toLowerCase())||"unknown")+" svelte-1qvq1kb")&&i(S,"class",z),U&2&&F!==(F=N[1].lastLatencyMs!==null?`${N[1].lastLatencyMs}ms`:"N/A")&&x(J,F),U&2&&Z!==(Z=ie(N[1].lastCheckedAt)+"")&&x(ee,Z),U&4&&$(e,"left",N[2].x+"px"),U&4&&$(e,"top",N[2].y+"px")},d(N){N&&d(e)}}}function We(l){let e,t,s,v,r="Services Dashboard",n,c,o="Refresh",E,w,u,k,m;function f(q,S){return q[4]?He:q[3]?Ue:q[5].length===0?Oe:Te}let p=f(l),g=p(l),D=l[1]&&Ce(l);return{c(){e=A(),t=h("main"),s=h("div"),v=h("h2"),v.textContent=r,n=A(),c=h("button"),c.textContent=o,E=A(),g.c(),w=A(),D&&D.c(),u=pe(),this.h()},l(q){Ne("svelte-1yae48b",ke.head).forEach(d),e=I(q),t=_(q,"MAIN",{class:!0});var V=C(t);s=_(V,"DIV",{class:!0});var T=C(s);v=_(T,"H2",{class:!0,"data-svelte-h":!0}),G(v)!=="svelte-1utspdy"&&(v.textContent=r),n=I(T),c=_(T,"BUTTON",{class:!0,title:!0,"aria-label":!0,"data-svelte-h":!0}),G(c)!=="svelte-107org"&&(c.textContent=o),T.forEach(d),E=I(V),g.l(V),V.forEach(d),w=I(q),D&&D.l(q),u=pe(),this.h()},h(){ke.title="Dashboard - pingiMAP",i(v,"class","svelte-1qvq1kb"),i(c,"class","btn btn-primary"),i(c,"title","Refresh services"),i(c,"aria-label","Refresh services"),i(s,"class","dashboard-header svelte-1qvq1kb"),i(t,"class","container")},m(q,S){R(q,e,S),R(q,t,S),a(t,s),a(s,v),a(s,n),a(s,c),a(t,E),g.m(t,null),R(q,w,S),D&&D.m(q,S),R(q,u,S),k||(m=se(c,"click",l[8]),k=!0)},p(q,[S]){p===(p=f(q))&&g?g.p(q,S):(g.d(1),g=p(q),g&&(g.c(),g.m(t,null))),q[1]?D?D.p(q,S):(D=Ce(q),D.c(),D.m(u.parentNode,u)):D&&(D.d(1),D=null)},i:ue,o:ue,d(q){q&&(d(e),d(t),d(w),d(u)),g.d(),D&&D.d(q),k=!1,m()}}}function Ee(l,e=20){return l.length>e?l.substring(0,e)+"...":l}function ie(l){if(!l)return"Never checked";const e=new Date(l),s=new Date().getTime()-e.getTime(),v=Math.floor(s/(1e3*60));if(v<1)return"Just now";if(v<60)return`${v}m ago`;const r=Math.floor(v/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`}function ce(l){return l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"Unknown"}function Fe(l,e,t){let s,v,r,n,c;_e(l,Me,b=>t(6,c=b));const{state:o,refresh:E}=Le();_e(l,o,b=>t(15,n=b));let w=null,u=null,k={x:0,y:0},m=!1;const f={UP:"var(--status-up)",SLOW:"var(--status-slow)",DOWN:"var(--status-down)",null:"var(--status-unknown)"};function p(b){return f[b??"null"]??f.null}async function g(){try{const b=await fetch("/api/config");b.ok&&t(0,w=await b.json())}catch(b){console.error("Failed to load config:",b)}}we(()=>{g();function b(y){if(u&&y.target instanceof Element){const P=document.querySelector(".service-overlay"),X=y.target.closest(".service-tile");!(P!=null&&P.contains(y.target))&&!X&&t(1,u=null)}}return document.addEventListener("click",b),()=>{document.removeEventListener("click",b)}});function D(b,y){if(t(1,u=b),y instanceof TouchEvent){m=!0;const P=y.touches[0]||y.changedTouches[0];P&&t(2,k={x:P.clientX,y:P.clientY})}else m=!1,t(2,k={x:y.clientX,y:y.clientY})}function q(){m||t(1,u=null)}function S(b,y){m&&((u==null?void 0:u.id)===b.id?t(1,u=null):D(b,y))}function V(b,y){if(y.key==="Enter"||y.key===" ")if(y.preventDefault(),(u==null?void 0:u.id)===b.id)t(1,u=null);else{const P=y.target.getBoundingClientRect();t(1,u=b),t(2,k={x:P.left+P.width/2,y:P.top+P.height/2})}else y.key==="Escape"&&t(1,u=null)}const T=(b,y)=>D(b,y),z=(b,y)=>S(b,y),B=(b,y)=>D(b,y),W=(b,y)=>V(b,y);return l.$$.update=()=>{l.$$.dirty&32768&&t(5,{services:s,loading:v,error:r}=n,s,(t(4,v),t(15,n)),(t(3,r),t(15,n)))},[w,u,k,r,v,s,c,o,E,f,p,D,q,S,V,n,T,z,B,W]}class Ke extends Ae{constructor(e){super(),Ie(this,e,Fe,We,De,{})}}export{Ke as component};
