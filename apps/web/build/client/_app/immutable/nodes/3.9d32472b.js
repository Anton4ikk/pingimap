import{s as Se,n as ce,c as _e,o as we,r as Ae}from"../chunks/scheduler.b5ecf4e6.js";import{S as Ie,i as Ve,s as A,g as v,e as ge,F as Ne,f as u,c as I,h as d,j as b,x as Z,k as o,E as ie,a as z,y as s,A as se,m as B,n as X,l as ee,o as $,G as Pe}from"../chunks/index.7d6cf7e9.js";import{g as Le,e as pe}from"../chunks/each.0775bae0.js";import{p as Me}from"../chunks/stores.21af20b6.js";import{u as Te}from"../chunks/usePollingServices.2f315274.js";const{document:ke}=Le;function be(l,e,t){const a=l.slice();return a[22]=e[t],a}function He(l){let e,t,a=l[0]&&ye(l),m=pe(l[5]),i=[];for(let n=0;n<m.length;n+=1)i[n]=Ce(be(l,m,n));return{c(){a&&a.c(),e=A(),t=v("div");for(let n=0;n<i.length;n+=1)i[n].c();this.h()},l(n){a&&a.l(n),e=I(n),t=d(n,"DIV",{class:!0});var f=b(t);for(let r=0;r<i.length;r+=1)i[r].l(f);f.forEach(u),this.h()},h(){o(t,"class","services-grid svelte-mkrsgl")},m(n,f){a&&a.m(n,f),z(n,e,f),z(n,t,f);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(t,null)},p(n,f){if(n[0]?a?a.p(n,f):(a=ye(n),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),f&31776){m=pe(n[5]);let r;for(r=0;r<m.length;r+=1){const D=be(n,m,r);i[r]?i[r].p(D,f):(i[r]=Ce(D),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=m.length}},d(n){n&&(u(e),u(t)),a&&a.d(n),Pe(i,n)}}}function Oe(l){let e,t='<div class="empty-icon svelte-mkrsgl">ðŸ“Š</div> <div class="empty-message svelte-mkrsgl"><h3 class="svelte-mkrsgl">No services added yet</h3> <p class="svelte-mkrsgl">Start monitoring your services by adding them first.</p> <a href="/services" class="btn btn-primary empty-action svelte-mkrsgl">Add Service</a></div>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(a){e=d(a,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-g3dhjl"&&(e.innerHTML=t),this.h()},h(){o(e,"class","empty-state svelte-mkrsgl")},m(a,m){z(a,e,m)},p:ce,d(a){a&&u(e)}}}function Ue(l){let e,t,a,m="Failed to load monitoring data",i,n,f,r;return{c(){e=v("div"),t=v("div"),a=v("h3"),a.textContent=m,i=A(),n=v("p"),f=B("Error: "),r=B(l[3]),this.h()},l(D){e=d(D,"DIV",{class:!0});var N=b(e);t=d(N,"DIV",{class:!0});var c=b(t);a=d(c,"H3",{"data-svelte-h":!0}),Z(a)!=="svelte-kkj1sw"&&(a.textContent=m),i=I(c),n=d(c,"P",{});var C=b(n);f=X(C,"Error: "),r=X(C,l[3]),C.forEach(u),c.forEach(u),N.forEach(u),this.h()},h(){o(t,"class","error-content"),o(e,"class","error svelte-mkrsgl")},m(D,N){z(D,e,N),s(e,t),s(t,a),s(t,i),s(t,n),s(n,f),s(n,r)},p(D,N){N&8&&$(r,D[3])},d(D){D&&u(e)}}}function Re(l){let e,t="Loading services...";return{c(){e=v("div"),e.textContent=t,this.h()},l(a){e=d(a,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-19m8021"&&(e.textContent=t),this.h()},h(){o(e,"class","loading svelte-mkrsgl")},m(a,m){z(a,e,m)},p:ce,d(a){a&&u(e)}}}function ye(l){let e,t,a,m,i,n,f=l[0].labels.up+"",r,D,N,c,C,T,_,k,E=l[0].labels.slow+"",G,Q,S,H,j,J,O,U,h=l[0].labels.down+"",p,w,V,y,g,M,R,K="Not checked";return{c(){e=v("div"),t=v("div"),a=v("div"),m=A(),i=v("span"),n=B("Up ("),r=B(f),D=B(")"),N=A(),c=v("div"),C=v("div"),T=A(),_=v("span"),k=B("Slow ("),G=B(E),Q=B(")"),S=A(),H=v("div"),j=v("div"),J=A(),O=v("span"),U=B("Down ("),p=B(h),w=B(")"),V=A(),y=v("div"),g=v("div"),M=A(),R=v("span"),R.textContent=K,this.h()},l(F){e=d(F,"DIV",{class:!0});var P=b(e);t=d(P,"DIV",{class:!0});var Y=b(t);a=d(Y,"DIV",{class:!0,style:!0}),b(a).forEach(u),m=I(Y),i=d(Y,"SPAN",{});var x=b(i);n=X(x,"Up ("),r=X(x,f),D=X(x,")"),x.forEach(u),Y.forEach(u),N=I(P),c=d(P,"DIV",{class:!0});var te=b(c);C=d(te,"DIV",{class:!0,style:!0}),b(C).forEach(u),T=I(te),_=d(te,"SPAN",{});var L=b(_);k=X(L,"Slow ("),G=X(L,E),Q=X(L,")"),L.forEach(u),te.forEach(u),S=I(P),H=d(P,"DIV",{class:!0});var W=b(H);j=d(W,"DIV",{class:!0,style:!0}),b(j).forEach(u),J=I(W),O=d(W,"SPAN",{});var q=b(O);U=X(q,"Down ("),p=X(q,h),w=X(q,")"),q.forEach(u),W.forEach(u),V=I(P),y=d(P,"DIV",{class:!0});var le=b(y);g=d(le,"DIV",{class:!0,style:!0}),b(g).forEach(u),M=I(le),R=d(le,"SPAN",{"data-svelte-h":!0}),Z(R)!=="svelte-u8rtka"&&(R.textContent=K),le.forEach(u),P.forEach(u),this.h()},h(){o(a,"class","legend-color svelte-mkrsgl"),ee(a,"background-color",l[9].UP),o(t,"class","legend-item svelte-mkrsgl"),o(C,"class","legend-color svelte-mkrsgl"),ee(C,"background-color",l[9].SLOW),o(c,"class","legend-item svelte-mkrsgl"),o(j,"class","legend-color svelte-mkrsgl"),ee(j,"background-color",l[9].DOWN),o(H,"class","legend-item svelte-mkrsgl"),o(g,"class","legend-color svelte-mkrsgl"),ee(g,"background-color",l[9].null),o(y,"class","legend-item svelte-mkrsgl"),o(e,"class","legend svelte-mkrsgl")},m(F,P){z(F,e,P),s(e,t),s(t,a),s(t,m),s(t,i),s(i,n),s(i,r),s(i,D),s(e,N),s(e,c),s(c,C),s(c,T),s(c,_),s(_,k),s(_,G),s(_,Q),s(e,S),s(e,H),s(H,j),s(H,J),s(H,O),s(O,U),s(O,p),s(O,w),s(e,V),s(e,y),s(y,g),s(y,M),s(y,R)},p(F,P){P&1&&f!==(f=F[0].labels.up+"")&&$(r,f),P&1&&E!==(E=F[0].labels.slow+"")&&$(G,E),P&1&&h!==(h=F[0].labels.down+"")&&$(p,h)},d(F){F&&u(e)}}}function Ce(l){let e,t,a=De(l[22].name)+"",m,i,n,f,r,D;function N(..._){return l[16](l[22],..._)}function c(..._){return l[17](l[22],..._)}function C(..._){return l[18](l[22],..._)}function T(..._){return l[19](l[22],..._)}return{c(){e=v("div"),t=v("div"),m=B(a),n=A(),this.h()},l(_){e=d(_,"DIV",{class:!0,style:!0,tabindex:!0,role:!0,"aria-label":!0});var k=b(e);t=d(k,"DIV",{class:!0,title:!0});var E=b(t);m=X(E,a),E.forEach(u),n=I(k),k.forEach(u),this.h()},h(){o(t,"class","service-name svelte-mkrsgl"),o(t,"title",i=l[22].name),o(e,"class","service-tile svelte-mkrsgl"),ee(e,"background-color",l[10](l[22].lastStatus)),o(e,"tabindex","0"),o(e,"role","button"),o(e,"aria-label",f="Service "+l[22].name+": "+ve(l[22].lastStatus)+", "+ue(l[22].lastCheckedAt))},m(_,k){z(_,e,k),s(e,t),s(t,m),s(e,n),r||(D=[se(e,"mouseenter",N),se(e,"mouseleave",l[12]),se(e,"click",c),se(e,"touchstart",C),se(e,"keydown",T)],r=!0)},p(_,k){l=_,k&32&&a!==(a=De(l[22].name)+"")&&$(m,a),k&32&&i!==(i=l[22].name)&&o(t,"title",i),k&32&&ee(e,"background-color",l[10](l[22].lastStatus)),k&32&&f!==(f="Service "+l[22].name+": "+ve(l[22].lastStatus)+", "+ue(l[22].lastCheckedAt))&&o(e,"aria-label",f)},d(_){_&&u(e),r=!1,Ae(D)}}}function Ee(l){let e,t,a,m=l[1].name+"",i,n,f,r,D="URL:",N,c,C=l[1].url+"",T,_,k,E,G="Status:",Q,S,H=ve(l[1].lastStatus)+"",j,J,O,U,h,p="Latency:",w,V,y=l[1].lastLatencyMs!==null?`${l[1].lastLatencyMs}ms`:"N/A",g,M,R,K,F="Last checked:",P,Y,x=ue(l[1].lastCheckedAt)+"",te;return{c(){e=v("div"),t=v("div"),a=v("h3"),i=B(m),n=A(),f=v("div"),r=v("span"),r.textContent=D,N=A(),c=v("span"),T=B(C),_=A(),k=v("div"),E=v("span"),E.textContent=G,Q=A(),S=v("span"),j=B(H),O=A(),U=v("div"),h=v("span"),h.textContent=p,w=A(),V=v("span"),g=B(y),M=A(),R=v("div"),K=v("span"),K.textContent=F,P=A(),Y=v("span"),te=B(x),this.h()},l(L){e=d(L,"DIV",{class:!0,style:!0,role:!0,"aria-labelledby":!0});var W=b(e);t=d(W,"DIV",{class:!0});var q=b(t);a=d(q,"H3",{id:!0,class:!0});var le=b(a);i=X(le,m),le.forEach(u),n=I(q),f=d(q,"DIV",{class:!0});var ae=b(f);r=d(ae,"SPAN",{class:!0,"data-svelte-h":!0}),Z(r)!=="svelte-1qbddqn"&&(r.textContent=D),N=I(ae),c=d(ae,"SPAN",{class:!0});var de=b(c);T=X(de,C),de.forEach(u),ae.forEach(u),_=I(q),k=d(q,"DIV",{class:!0});var re=b(k);E=d(re,"SPAN",{class:!0,"data-svelte-h":!0}),Z(E)!=="svelte-1es190i"&&(E.textContent=G),Q=I(re),S=d(re,"SPAN",{class:!0});var fe=b(S);j=X(fe,H),fe.forEach(u),re.forEach(u),O=I(q),U=d(q,"DIV",{class:!0});var ne=b(U);h=d(ne,"SPAN",{class:!0,"data-svelte-h":!0}),Z(h)!=="svelte-1sgh8ma"&&(h.textContent=p),w=I(ne),V=d(ne,"SPAN",{class:!0});var he=b(V);g=X(he,y),he.forEach(u),ne.forEach(u),M=I(q),R=d(q,"DIV",{class:!0});var oe=b(R);K=d(oe,"SPAN",{class:!0,"data-svelte-h":!0}),Z(K)!=="svelte-rrvfh5"&&(K.textContent=F),P=I(oe),Y=d(oe,"SPAN",{class:!0});var me=b(Y);te=X(me,x),me.forEach(u),oe.forEach(u),q.forEach(u),W.forEach(u),this.h()},h(){var L;o(a,"id","overlay-title"),o(a,"class","svelte-mkrsgl"),o(r,"class","overlay-label svelte-mkrsgl"),o(c,"class","overlay-value svelte-mkrsgl"),o(f,"class","overlay-field svelte-mkrsgl"),o(E,"class","overlay-label svelte-mkrsgl"),o(S,"class",J="overlay-value status-"+(((L=l[1].lastStatus)==null?void 0:L.toLowerCase())||"unknown")+" svelte-mkrsgl"),o(k,"class","overlay-field svelte-mkrsgl"),o(h,"class","overlay-label svelte-mkrsgl"),o(V,"class","overlay-value svelte-mkrsgl"),o(U,"class","overlay-field svelte-mkrsgl"),o(K,"class","overlay-label svelte-mkrsgl"),o(Y,"class","overlay-value svelte-mkrsgl"),o(R,"class","overlay-field svelte-mkrsgl"),o(t,"class","overlay-content svelte-mkrsgl"),o(e,"class","service-overlay svelte-mkrsgl"),ee(e,"left",l[2].x+"px"),ee(e,"top",l[2].y+"px"),o(e,"role","tooltip"),o(e,"aria-labelledby","overlay-title")},m(L,W){z(L,e,W),s(e,t),s(t,a),s(a,i),s(t,n),s(t,f),s(f,r),s(f,N),s(f,c),s(c,T),s(t,_),s(t,k),s(k,E),s(k,Q),s(k,S),s(S,j),s(t,O),s(t,U),s(U,h),s(U,w),s(U,V),s(V,g),s(t,M),s(t,R),s(R,K),s(R,P),s(R,Y),s(Y,te)},p(L,W){var q;W&2&&m!==(m=L[1].name+"")&&$(i,m),W&2&&C!==(C=L[1].url+"")&&$(T,C),W&2&&H!==(H=ve(L[1].lastStatus)+"")&&$(j,H),W&2&&J!==(J="overlay-value status-"+(((q=L[1].lastStatus)==null?void 0:q.toLowerCase())||"unknown")+" svelte-mkrsgl")&&o(S,"class",J),W&2&&y!==(y=L[1].lastLatencyMs!==null?`${L[1].lastLatencyMs}ms`:"N/A")&&$(g,y),W&2&&x!==(x=ue(L[1].lastCheckedAt)+"")&&$(te,x),W&4&&ee(e,"left",L[2].x+"px"),W&4&&ee(e,"top",L[2].y+"px")},d(L){L&&u(e)}}}function We(l){let e,t,a,m,i='<img src="/logo.png" alt="pingiMAP Logo" class="nav-logo svelte-mkrsgl"/>',n,f,r,D="Dashboard",N,c,C="Services",T,_,k,E,G="Services Dashboard",Q,S,H="Refresh",j,J,O,U,h;function p(g,M){return g[4]?Re:g[3]?Ue:g[5].length===0?Oe:He}let w=p(l),V=w(l),y=l[1]&&Ee(l);return{c(){e=A(),t=v("nav"),a=v("div"),m=v("div"),m.innerHTML=i,n=A(),f=v("div"),r=v("a"),r.textContent=D,N=A(),c=v("a"),c.textContent=C,T=A(),_=v("main"),k=v("div"),E=v("h2"),E.textContent=G,Q=A(),S=v("button"),S.textContent=H,j=A(),V.c(),J=A(),y&&y.c(),O=ge(),this.h()},l(g){Ne("svelte-1yae48b",ke.head).forEach(u),e=I(g),t=d(g,"NAV",{class:!0});var R=b(t);a=d(R,"DIV",{class:!0});var K=b(a);m=d(K,"DIV",{class:!0,"data-svelte-h":!0}),Z(m)!=="svelte-tklqds"&&(m.innerHTML=i),n=I(K),f=d(K,"DIV",{class:!0});var F=b(f);r=d(F,"A",{href:!0,class:!0,"data-svelte-h":!0}),Z(r)!=="svelte-1cb9f5c"&&(r.textContent=D),N=I(F),c=d(F,"A",{href:!0,class:!0,"data-svelte-h":!0}),Z(c)!=="svelte-1lo2dff"&&(c.textContent=C),F.forEach(u),K.forEach(u),R.forEach(u),T=I(g),_=d(g,"MAIN",{class:!0});var P=b(_);k=d(P,"DIV",{class:!0});var Y=b(k);E=d(Y,"H2",{class:!0,"data-svelte-h":!0}),Z(E)!=="svelte-1utspdy"&&(E.textContent=G),Q=I(Y),S=d(Y,"BUTTON",{class:!0,title:!0,"aria-label":!0,"data-svelte-h":!0}),Z(S)!=="svelte-1w43g05"&&(S.textContent=H),Y.forEach(u),j=I(P),V.l(P),P.forEach(u),J=I(g),y&&y.l(g),O=ge(),this.h()},h(){ke.title="Dashboard - pingiMAP",o(m,"class","nav-brand svelte-mkrsgl"),o(r,"href","/"),o(r,"class","svelte-mkrsgl"),ie(r,"active",l[6].url.pathname==="/"),o(c,"href","/services"),o(c,"class","svelte-mkrsgl"),ie(c,"active",l[6].url.pathname.startsWith("/services")),o(f,"class","nav-links svelte-mkrsgl"),o(a,"class","nav-container svelte-mkrsgl"),o(t,"class","top-nav svelte-mkrsgl"),o(E,"class","svelte-mkrsgl"),o(S,"class","refresh-btn svelte-mkrsgl"),o(S,"title","Refresh services"),o(S,"aria-label","Refresh services"),o(k,"class","dashboard-header svelte-mkrsgl"),o(_,"class","dashboard svelte-mkrsgl")},m(g,M){z(g,e,M),z(g,t,M),s(t,a),s(a,m),s(a,n),s(a,f),s(f,r),s(f,N),s(f,c),z(g,T,M),z(g,_,M),s(_,k),s(k,E),s(k,Q),s(k,S),s(_,j),V.m(_,null),z(g,J,M),y&&y.m(g,M),z(g,O,M),U||(h=se(S,"click",l[8]),U=!0)},p(g,[M]){M&64&&ie(r,"active",g[6].url.pathname==="/"),M&64&&ie(c,"active",g[6].url.pathname.startsWith("/services")),w===(w=p(g))&&V?V.p(g,M):(V.d(1),V=w(g),V&&(V.c(),V.m(_,null))),g[1]?y?y.p(g,M):(y=Ee(g),y.c(),y.m(O.parentNode,O)):y&&(y.d(1),y=null)},i:ce,o:ce,d(g){g&&(u(e),u(t),u(T),u(_),u(J),u(O)),V.d(),y&&y.d(g),U=!1,h()}}}function De(l,e=20){return l.length>e?l.substring(0,e)+"...":l}function ue(l){if(!l)return"Never checked";const e=new Date(l),a=new Date().getTime()-e.getTime(),m=Math.floor(a/(1e3*60));if(m<1)return"Just now";if(m<60)return`${m}m ago`;const i=Math.floor(m/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function ve(l){return l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"Unknown"}function qe(l,e,t){let a,m,i,n,f;_e(l,Me,h=>t(6,f=h));const{state:r,refresh:D}=Te();_e(l,r,h=>t(15,n=h));let N=null,c=null,C={x:0,y:0},T=!1;const _={UP:"#22c55e",SLOW:"#f59e0b",DOWN:"#ef4444",null:"#9ca3af"};function k(h){return _[h??"null"]??_.null}async function E(){try{const h=await fetch("/api/config");h.ok&&t(0,N=await h.json())}catch(h){console.error("Failed to load config:",h)}}we(()=>{E();function h(p){if(c&&p.target instanceof Element){const w=document.querySelector(".service-overlay"),V=p.target.closest(".service-tile");!(w!=null&&w.contains(p.target))&&!V&&t(1,c=null)}}return document.addEventListener("click",h),()=>{document.removeEventListener("click",h)}});function G(h,p){if(t(1,c=h),p instanceof TouchEvent){T=!0;const w=p.touches[0]||p.changedTouches[0];w&&t(2,C={x:w.clientX,y:w.clientY})}else T=!1,t(2,C={x:p.clientX,y:p.clientY})}function Q(){T||t(1,c=null)}function S(h,p){T&&((c==null?void 0:c.id)===h.id?t(1,c=null):G(h,p))}function H(h,p){if(p.key==="Enter"||p.key===" ")if(p.preventDefault(),(c==null?void 0:c.id)===h.id)t(1,c=null);else{const w=p.target.getBoundingClientRect();t(1,c=h),t(2,C={x:w.left+w.width/2,y:w.top+w.height/2})}else p.key==="Escape"&&t(1,c=null)}const j=(h,p)=>G(h,p),J=(h,p)=>S(h,p),O=(h,p)=>G(h,p),U=(h,p)=>H(h,p);return l.$$.update=()=>{l.$$.dirty&32768&&t(5,{services:a,loading:m,error:i}=n,a,(t(4,m),t(15,n)),(t(3,i),t(15,n)))},[N,c,C,i,m,a,f,r,D,_,k,G,Q,S,H,n,j,J,O,U]}class Ge extends Ie{constructor(e){super(),Ve(this,e,qe,We,Se,{})}}export{Ge as component};
